[sqlfluff]

# Supported dialects https://docs.sqlfluff.com/en/stable/dialects.html
# Or run 'sqlfluff dialects'
dialect = {{dbt_adapter}}

# One of [raw|jinja|python|placeholder]
templater = dbt

# Ignore linting errors found within sections of code coming directly from
# templated code (e.g. from within Jinja curly braces. Note that it does not
# ignore errors from literal code found within template loops.
ignore_templated_areas = true

# CPU processes to use while linting.
# The default is "single threaded" to allow easy debugging, but this
# is often undesirable at scale.
# If positive, just implies number of processes.
# If negative or zero, implies number_of_cpus - specified_number.
# e.g. -1 means use all processors but one. 0 means all cpus.
processes = -1

# Max line length is set by default to be in line with the dbt style guide.
# https://github.com/dbt-labs/corp/blob/main/dbt_style_guide.md
# Set to zero or negative to disable checks.
max_line_length = 140


### Recommended Rules
# Explanation
# AL01, AL02 rules deal with aliasing; require "AS" when aliasing table or column
# CP01, CP02 rules deal with capitalization;  keywords and column identifiers show by consistant
# LT01, LT02, LT03, LT04, LT05, LT09, LT12 rules deal with Layout, indentation, excessive white space, comma placement, etc
# ST01, ST02, ST03 rules deal with structure, unnecessary ELSE in CASE, unused CTEs, wildcards before calculations
# RF01 rule deal with reference to objects not present in FROM clause

rules = AL01, AL02, CP01, CP02, LT01, LT02, LT03, LT04, LT05, LT09, LT12, ST01, ST02, ST03, RF01


[sqlfluff:templater:dbt]
project_dir = ./

# The default configuration for aliasing rules is "consistent"
# which will auto-detect the setting from the rest of the file. This
# is less desirable in a new project and you may find this (slightly
# more strict) setting more useful.
[sqlfluff:rules:aliasing.table]
aliasing = explicit
[sqlfluff:rules:aliasing.column]
aliasing = explicit

[sqlfluff:layout:type:comma]
line_position = trailing

[sqlfluff:rules:capitalisation.keywords]
capitalisation_policy = lower

[sqlfluff:rules:capitalisation.identifiers]
## Unquoted identifiers
extended_capitalisation_policy = lower
